<meta charset="utf-8">
<html lang="ko">
<link rel="stylesheet" type="text/css" href="/static/article-style.css"/>
<body>
<div class="wrap-right">
    <main class="main ">
        <div class="area-main">
             <div class="article-header">
                 <a href="/" class="link_post">ecsimsw</a>
í˜„ì¬ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ API ì˜ ì‘ë‹µì„ ìë™ ìƒì„±í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬             </div>
             <div class="article-view">
                 <h4 data-ke-size="size20"><span style="color: #333333;"><b><b>ë¯¸ë¦¬ ë³´ê¸°&nbsp;</b></b></span></h4> 
<p style="color: #333333; text-align: start;" data-ke-size="size16"><span style="color: #333333;">ì»¨íŠ¸ë¡¤ëŸ¬ì— @ShutDown ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ê³  ì„ì‹œ ì‘ë‹µì„ ì–´ë–»ê²Œ ì „ë‹¬í• ì§€ë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ShutDown ì¡°ê±´ì—ì„œ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ì•„ë˜ ëª¨ë“  í•¸ë“¤ëŸ¬ì˜ ì„ì‹œ ì‘ë‹µì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì¤€ë‹¤.</span></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<p></p>
<figure class="imageblock alignCenter" data-ke-mobilestyle="widthOrigin" data-origin-width="1764" data-origin-height="696">
 <span data-url="https://blog.kakaocdn.net/dn/bzGnx4/btsEkCfNC94/FXv0bLBm7AFrkmzgev3wdk/img.png" data-lightbox="lightbox"><img src="https://blog.kakaocdn.net/dn/bzGnx4/btsEkCfNC94/FXv0bLBm7AFrkmzgev3wdk/img.png" srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbzGnx4%2FbtsEkCfNC94%2FFXv0bLBm7AFrkmzgev3wdk%2Fimg.png" onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';" width="807" height="318" data-origin-width="1764" data-origin-height="696"></span>
</figure> 
<p></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16"><span style="color: #333333;">ìœ„ ì˜ˆì‹œì—ì„œ DailyCountRepository íƒ€ì…ì˜ ë¹ˆì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ /api/counts ë¥¼ GET ìš”ì²­í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì‘ë‹µí•œë‹¤.</span></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<pre id="code_1706881346376" class="routeros" style="background-color: #f8f8f8; color: #383a42; text-align: start;" data-ke-type="codeblock" data-ke-language="bash"><code>HTTP status : 503, SERVICE_UNAVAILABLE
Content type : application/json
Message : This API is currently unavailable.</code></pre> 
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16"><span style="color: #333333;">ì•„ë˜ ì‚¬ìš© ë°©ë²•ì´ë‚˜ ë²„ì „, ê¸°ëŠ¥ì€ í˜„ì¬ ê¸€ì„ ì“°ëŠ” ì²« ë°°í¬ ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.</span></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16"><span style="color: #333333;">ìµœì‹  ë³€ê²½ ì‚¬í•­ì€&nbsp;<a style="color: #333333;" href="https://github.com/ecsimsw/api-shutdown">https://github.com/ecsimsw/api-shutdown</a>&nbsp;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.&nbsp;</span></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<h4 data-ke-size="size20"><span style="color: #333333;"><b>ì œì‘ ë°°ê²½</b></span></h4> 
<p data-ke-size="size16"><span style="color: #333333;">ì• ë‹ˆë©”ì´ì…˜ ëª…ëŒ€ì‚¬ë¥¼ ìŠì–´ì£¼ëŠ” <a style="color: #333333;" href="https://github.com/rocktimsaikia/animechan" target="_blank" rel="noopener">ì™¸êµ­ ê³µê°œ API ì„œë¹„ìŠ¤</a>ì„ ë³´ê³  í•œêµ­ ì• ë‹ˆë©”ì´ì…˜ì„ í¬í•¨í•œ í•œêµ­ì–´ ë²„ì „ì´ ìˆì—ˆìœ¼ë©´ ì¬ë°Œê² ë‹¤ëŠ” ìƒê°ì— í•œêµ­ì–´ ë²„ì „ API ë¥¼ ì œì‘í•˜ì—¬ ë°°í¬í–ˆë‹¤. (<a style="color: #333333;" title="anime-kr" href="https://github.com/Giggle-projects/anime-kr" target="_blank" rel="noopener">anime-kr</a>)</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"> ì‚¬ìš©ì ìš”ì²­ ìˆ˜ë¥¼ ì¹´ìš´íŠ¸í•˜ê³  ìˆëŠ”ë° ê³µê°œ 5ì¼ë§Œì— 12ë§Œ ê°œ, ì–´ì œëŠ” ë§Œ ì¹ ì²œ ê°œì˜ ìš”ì²­ ë“¤ì–´ì™”ì„ ì •ë„ë¡œ ìƒê°ë³´ë‹¤ ìš”ì²­ì´ ì ì í•˜ë‹¤. ì•„ë§ˆ ì£¼ë³€ ì¹œêµ¬ë“¤ì´ ì£„ë‹¤ ê°œë°œìì´ê³  ê³µê°œë„ Github ì—ì„œ í–ˆê¸°ì— ë‹¤ë“¤ ì°¸ì§€ ëª»í•˜ê³  ë¶€í•˜í…ŒìŠ¤íŠ¸ë¶€í„° ëŒë ¤ë³¸ ê²Œ ì•„ë‹ê¹Œ ìƒê°í•´ ë³¸ë‹¤. <span style="text-align: start;">ì´ëŸ° ìƒí™©ì´ë‹¤ë³´ë‹ˆ ìš”ì²­ ë¶€í•˜ ë¶„ì‚°, Rate limit ì´ë‚˜ ì„œë¹„ìŠ¤ ì¥ì•  ëŒ€ë¹„ì— ë” ì‹ ê²½ ì“°ê³  ìˆê³  ì˜¤íˆë ¤ ì¬ë°Œë‹¤.</span></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p></p>
<figure class="imageblock alignCenter" data-ke-mobilestyle="widthOrigin" data-origin-width="1730" data-origin-height="1168">
 <span data-url="https://blog.kakaocdn.net/dn/DyFOz/btsDxhcFAhU/6DpFAxdNzAQh2BEgeV4KR1/img.png" data-lightbox="lightbox"><img src="https://blog.kakaocdn.net/dn/DyFOz/btsDxhcFAhU/6DpFAxdNzAQh2BEgeV4KR1/img.png" srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FDyFOz%2FbtsDxhcFAhU%2F6DpFAxdNzAQh2BEgeV4KR1%2Fimg.png" onerror="this.onerror=null; this.src='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png'; this.srcset='//t1.daumcdn.net/tistory_admin/static/images/no-image-v1.png';" width="716" height="483" data-origin-width="1730" data-origin-height="1168"></span>
</figure> 
<p></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">ë°°í¬ êµ¬ì¡°ëŠ” ìœ„ì™€ ê°™ì€ë° ê²Œì´íŠ¸ì›¨ì´ëŠ” LB ì¤‘ WASê°€ íŠ¹ì • ì¡°ê±´ìœ¼ë¡œ ì‘ë‹µì„ ìˆ˜ì‹ í•˜ì§€ ëª»í•˜ê²Œ ë˜ë©´ ì¼ì • ì‹œê°„ ë™ì•ˆ ì´ WASë¥¼ unavailable ìœ¼ë¡œ í‘œì‹œí•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  WASê°€ ë‹¤ìš´ë˜ëŠ” ê²½ìš° ìš”ì²­ì„ ëŒë ¤ Backup server ì—ì„œ ì„ì‹œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.&nbsp;</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">ì´ë•Œ backup server ëŠ” <b>ë‹¤ë¥¸ ì¸í”„ë¼ ì—†ì´ ë‹¨ì¼ WAS í•˜ë‚˜ë¡œ ìµœì†Œí•œì˜ APIë§Œ ì œê³µ</b>í•œë‹¤. ê·¸ë ‡ë‹¤ê³  ì´ë¯¸ ì •ì˜ëœ Docs ì˜ API ë¥¼ í¬ê¸°í•  ìˆœ ì—†ë‹¤. <b>Not found ê°€ ì•„ë‹ˆë¼ ì ì ˆí•œ ì‘ë‹µ Status ì™€ í•¨ê»˜ í˜„ì¬ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ìƒíƒœì„</b>ì„ ì•Œë ¤ì•¼ í•œë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ Main server ì™€ ë™ì¼í•œ í•¸ë“¤ëŸ¬ë¥¼ ì •ì˜í•˜ê³  ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë  ê²ƒ ê°™ë‹¤. ê·¸ëŸ¬ë©´ ì½”ë“œë„ ë”ëŸ¬ì›Œì§€ê³  ë§¤ í•¸ë“¤ëŸ¬ë§ˆë‹¤ ì‘ë‹µ ë°©ë²•ë„ ë°˜ë³µë  ê²ƒì´ë‹¤. Main ì˜ API ê°€ ì¶”ê°€ë˜ë©´ ë˜ ì´ë¥¼ ê´€ë¦¬í•´ì¤˜ì•¼ í•  ê²ƒì´ê³  ì•„ì£¼ í•˜ë“œ ì½”ë”© ê·¸ ìì²´ë‹¤.&nbsp;</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705446274393" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@ConditionalOnBean(DailyCountRepository.class)
@RestController
class AccessCountApi {

    private final DailyCountRepository dailyCounts;

    @GetMapping("/api/counts")
    public ResponseEntity&lt;DailyCount&gt; count() {
        var result = dailyCounts.get();
        return ResponseEntity.ok(result);
    }
}

@ConditionalOnMissingBean(DailyCountRepository.class)
@RestController
class AccessCountForBackupApi {

    @GetMapping("/api/counts")
    public ResponseEntity&lt;String&gt; count() {
        return ResponseEntity.status(HttpStatus.SERVICE_UNAVAILABLE).body("í˜„ì¬ ì‚¬ìš© ë¶ˆê°€");
    }
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><span style="text-align: start;">ShutDown </span>ì´ëŸ° ìƒí™©ì—ì„œ ë§Œë“¤ì–´ì¡Œë‹¤.</span></p> 
<p style="color: #333333; text-align: start;" data-ke-size="size16"><span style="color: #333333;">ì´ ë¬¸ì œë¥¼ ì–´ë…¸í…Œì´ì…˜ í•˜ë‚˜ë¡œ í•´ê²°í•˜ë ¤ í•œë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1706881670274" class="cpp" style="background-color: #f8f8f8; color: #383a42; text-align: start;" data-ke-type="codeblock" data-ke-language="cpp"><code>@ShutDown(
    conditionOnMissingBean = DailyCountRepository.class,
    message = "This API is currently unavailable.",
    status = HttpStatus.SERVICE_UNAVAILABLE,
    contentType = MediaType.APPLICATION_JSON_VALUE
)</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<h4 data-ke-size="size20"><span style="color: #333333;"><b>ì‚¬ìš© ë°©ë²•&nbsp;</b><b></b></span></h4> 
<p data-ke-size="size16"><span style="color: #333333;"><b>1. ì˜ì¡´ì„± ì¶”ê°€</b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333; text-align: start;">build.gradle ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ import í•œë‹¤.&nbsp;</span></p> 
<p data-ke-size="size16"><span style="color: #333333;"><span style="text-align: start;">Javax ë¥¼ ì‚¬ìš©í•˜ëŠ” </span>Spring boot 2.X.X, JDK 17 ë¯¸ë§Œì˜ ê²½ìš° javax-X.X.X ë¥¼ ì´ìš©í•œë‹¤.&nbsp;</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447159460" class="java" data-ke-language="java" data-ke-type="codeblock"><code>repositories {
    maven { url 'https://jitpack.io' }
}

dependencies {
    implementation 'com.github.ecsimsw:api-shutdown:0.0.5'
    // implementation 'com.github.ecsimsw:api-shutdown:javax-0.0.5'       // for Versions lower than java17
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><b>2. <span style="background-color: #ffffff; text-align: start;">ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© í™œì„±í™”</span></b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="background-color: #ffffff; color: #333333; text-align: start;">@EnableShutDown ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì„ í™œì„±í™”í•œë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447364303" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@EnableShutDown
@SpringBootApplication
public class MyApplication {}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><b>3. @ShutDown ì •ì˜</b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447401845" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@ShutDown(
    conditionOnActiveProfile = "backup",
    message = "This API is currently unavailable.",
    status = HttpStatus.SERVICE_UNAVAILABLE,
    contentType = MediaType.APPLICATION_JSON_VALUE
)
@RestController
class ShutDownController {

    @GetMapping("/api/shutDownGet")
    public ResponseEntity&lt;String&gt; hi() {
        return ResponseEntity.ok("Hi");
    }

    @PostMapping("/api/shutDownPost")
    public ResponseEntity&lt;String&gt; hey() {
        return ResponseEntity.ok("Hey");
    }
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">í•¸ë“¤ëŸ¬ëŠ”&nbsp;@GetMapping,&nbsp;@PutMapping,&nbsp;@DeleteMapping,&nbsp;@PatchMapping,&nbsp;@RequestMapping&nbsp;ë¥¼&nbsp;ì§€ì›í•˜ê³ &nbsp;ì—¬ëŸ¬&nbsp;UrlPath,&nbsp;HttpMethod&nbsp;ë¥¼&nbsp;ì§€ì •í• &nbsp;ìˆ˜&nbsp;ìˆë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447421297" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@RequestMapping(
    value = {
        TestApis.API_TO_BE_SHUTDOWN_MULTIPLE_MAPPINGS_1,
        TestApis.API_TO_BE_SHUTDOWN_MULTIPLE_MAPPINGS_2
    },
    method = { RequestMethod.GET, RequestMethod.POST }
)
public ResponseEntity&lt;String&gt; api1() {
    return ResponseEntity.ok(DEFAULT_NORMAL_MESSAGE);
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">ì •ì˜ëœ ì¡°ê±´ì—ì„œ í•¸ë“¤ëŸ¬ì˜ ì •ì˜ëŒ€ë¡œ API í˜¸ì¶œ ì‹œ ShutDown ì— í‘œì‹œëœ ì‘ë‹µì´ ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<h4 data-ke-size="size20"><span style="color: #333333;"><b>ì¶”ê°€ ê¸°ëŠ¥</b></span></h4> 
<p data-ke-size="size16"><span style="color: #333333;"><b>1.&nbsp;Default&nbsp;ì„¤ì •&nbsp;ë³€ê²½&nbsp;-&nbsp;Global&nbsp;configuration</b></span></p> 
<p data-ke-size="size16"><br><span style="color: #333333;">ShutDownGlobalConfig&nbsp;ë¹ˆì„&nbsp;ë“±ë¡í•˜ëŠ”&nbsp;ê²ƒìœ¼ë¡œ&nbsp;ê¸°ë³¸ê°’ì„&nbsp;ì„¤ì •í• &nbsp;ìˆ˜&nbsp;ìˆë‹¤.&nbsp;@ShutDown&nbsp;ì—&nbsp;ì§ì ‘&nbsp;ê°’ì„&nbsp;ì…ë ¥í•˜ëŠ”&nbsp;ê²½ìš°&nbsp;í•´ë‹¹&nbsp;ê°’ì´&nbsp;ìš°ì„ ì‹œë˜ê³ ,&nbsp;ê°’ì„&nbsp;ì…ë ¥í•˜ì§€&nbsp;ì•ŠëŠ”&nbsp;ê²½ìš°&nbsp;Global&nbsp;config&nbsp;ì—&nbsp;ì •ì˜ëœ&nbsp;ê°’ìœ¼ë¡œ&nbsp;ì„¤ì •ëœë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447557300" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@EnableShutDown
@Configuration
public class ShutDownConfig {

    @Bean
    public ShutDownGlobalConfig shutDown() {
        return new ShutDownGlobalConfigBuilder()
            .message("Global config message")
            .status(HttpStatus.TEMPORARY_REDIRECT)
            .contentType(MediaType.APPLICATION_JSON_VALUE)
            .build();
    }
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><b>2.&nbsp;ì„¤ì •&nbsp;ê°€ëŠ¥í•œ&nbsp;ShutDown&nbsp;ì¡°ê±´ë“¤</b></span></p> 
<p data-ke-size="size18">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">- conditionOnActiveProfile : ì •ì˜ëœ Profile ë“¤ì´ ëª¨ë‘ Activate ë˜ì–´ ìˆëŠ” ê²½ìš° ShutDown ëœë‹¤.</span><br><span style="color: #333333;">- conditionOnProperties : ì •ì˜ëœ Property ë“¤ì´ ëª¨ë‘ Application property ë¡œ ë“±ë¡ë˜ì–´ ìˆëŠ” ê²½ìš° ShutDown ëœë‹¤.</span><br><span style="color: #333333;">- conditionOnBean : ì •ì˜ëœ Type ë“¤ì´ ëª¨ë‘ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆëŠ” ê²½ìš° ShutDown ëœë‹¤.</span><br><span style="color: #333333;">- conditionOnMissingBean : ì •ì˜ëœ Type ë“¤ì´ ëª¨ë‘ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš° ShutDown ëœë‹¤.</span><br><span style="color: #333333;">- force : ì•ì„  ì–´ë–¤ ì¡°ê±´ë“¤ê³¼ ìƒê´€ì—†ì´ true ë©´ í•´ë‹¹ í•¸ë“¤ëŸ¬ë“¤ì€ ëª¨ë‘ ShutDown ëœë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447646343" class="java" data-ke-language="java" data-ke-type="codeblock"><code>public @interface ShutDown {

    // Shut down when all the profiles are activated
    String[] conditionOnActiveProfile() default {};

    // Shut down when all the properties exist
    String[] conditionOnProperties() default {};

    // Shut down when all the beans exist
    Class&lt;?&gt;[] conditionOnBean() default {};

    // Shut down when all the beans not exist
    Class&lt;?&gt;[] conditionOnMissingBean() default {};

    // Force shutdown ignoring other conditions
    boolean force() default false;
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><b>3.&nbsp;ShutDown&nbsp;filter</b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">BeanFactoryPostProcessor ê°€ ì‹¤í–‰ë˜ëŠ” ê³¼ì •ì—ì„œ ShutDown ì¡°ê±´ì„ í™•ì¸í•˜ê³  ì´ì— ë¶€í•©í•˜ë©´ Filter ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.</span></p> 
<p style="background-color: #ffffff; color: #1f2328; text-align: start;" data-ke-size="size16"><span style="color: #333333;">í•´ë‹¹ Filter ì˜ Orderì™€ Name ì„¤ì •ì€ ShutDownGlobalConfig ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</span></p> 
<p style="background-color: #ffffff; color: #1f2328; text-align: start;" data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447673108" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@Configuration
public class ShutDownConfig {

    @Bean
    public ShutDownGlobalConfig shutDown() {
        return new ShutDownGlobalConfigBuilder()
            .filterOrder(1)
            .filterPrefix("myShutDownFilter")
            .build();  
    }
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<h4 data-ke-size="size20"><span style="color: #333333;"><b>ì¶”ê°€&nbsp;ì˜ˆì •&nbsp;ì‚¬í•­</b></span></h4> 
<p data-ke-size="size16"><span style="color: #333333;"><b>1.&nbsp;@ShutDown&nbsp;í•¸ë“¤ëŸ¬</b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><span style="background-color: #ffffff; text-align: start;">ì»¨íŠ¸ë¡¤ëŸ¬ë§Œì´ ì•„ë‹Œ í•¸ë“¤ëŸ¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œë„ ì–´ë…¸í…Œì´ì…˜ì´ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. </span><span style="background-color: #ffffff; text-align: start;">ì´ë•Œ í•¸ë“¤ëŸ¬ì˜ ì„¤ì •ì´ ë” ìš°ì„  ì‹œ ë˜ê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì— ë¶™ì€ ì„¤ì •ì€ í•¸ë“¤ëŸ¬ì— ì •ì˜ë˜ì§€ ì•Šì€ í•¸ë“¤ëŸ¬ì— ì ìš©ë˜ëŠ” ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í•œë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ì— ë¶™ì€ @ShutDown ì—†ì´ í•¸ë“¤ëŸ¬ì— ë¶™ì€ ì¡°ê±´ë§Œìœ¼ë¡œë„ ë™ì‘í•œë‹¤.</span></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<pre id="code_1705447787719" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@ShutDown(
  message = "ì„œë²„ ìƒíƒœ ì´ìƒìœ¼ë¡œ í˜„ì¬ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ API ì…ë‹ˆë‹¤.",
  status = HttpStatus.INTERNAL_SERVER_ERROR
)
@RestController
class ShutDownController {

    @ShutDown(
      message = "hiëŠ” ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
      status = HttpStatus.PERMANENT_REDIRECT
    )
    @GetMapping("/api/shutDownGet")
    public ResponseEntity&lt;String&gt; hi() {
        return ResponseEntity.ok("Hi");
    }

    @PostMapping("/api/shutDownPost")
    public ResponseEntity&lt;String&gt; hey() {
        return ResponseEntity.ok("Hey");
    }
}</code></pre> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;"><b>2. ë³´ë‹¤&nbsp;êµ¬ì²´ì ì¸&nbsp;ShutDown&nbsp;ì¡°ê±´,&nbsp;Filter&nbsp;match&nbsp;ì¡°ê±´ì„ ì œê³µí•œë‹¤.</b></span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<h4 data-ke-size="size20"><span style="color: #333333;"><b>ë§ˆë¬´ë¦¬&nbsp;</b></span></h4> 
<p data-ke-size="size16"><span style="color: #333333;">ë‚´ ê²½ìš°ì²˜ëŸ¼ íŠ¹ì • ì¡°ê±´ì—ì„œ FailOver ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ê±°ë‚˜ ì•„ë‹ˆë©´ ì•„ì˜ˆ ë” ì´ìƒ ì§€ì›í•˜ì§€ ì•Šì€ API ì˜ ì‘ë‹µì„ ì½”ë“œ ë³€ê²½ ì—†ì´ ê°„ë‹¨í•˜ê²Œ í†µì¼í•˜ëŠ”ë° ì‚¬ìš©ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</span></p> 
<p data-ke-size="size16">&nbsp;</p> 
<p data-ke-size="size16"><span style="color: #333333;">ëˆ„êµ°ê°€ì—ê²Œ ìœ ìš©í•˜ë‹¤ê³ , ì¬ë°Œë‹¤ê³  ì—¬ê¸¸ ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤. ğŸ˜„</span></p> 
<p data-ke-size="size16">&nbsp;</p>             </div>
        </div>
    </main>
</div>
</body>
</html>>